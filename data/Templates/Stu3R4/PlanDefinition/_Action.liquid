{% mergeDiff msg -%}
{
  "prefix" : "{{msg.label}}",
  "documentation" : [ {{ msg.documentation | to_array | batch_render: 'Shared/RelatedArtifact', 'msg' }} ],
  "trigger" : {{msg.triggerDefinition | to_json_string}},
  "condition" : [ {{ msg.condition | to_array | batch_render: 'PlanDefinition/Condition', 'msg' }} ],
  "input" : [ {{ msg.input | to_array | batch_render: 'Shared/DataRequirement', 'msg' }} ],
  "output" : [ {{ msg.output | to_array | batch_render: 'Shared/DataRequirement', 'msg' }} ],
  "type" : {% include 'Shared/Coding2CodeableConcept' msg: msg.type -%},
  "transform" : {% include 'Shared/Reference2Canonical' msg: msg.transform -%},
  "dynamicValue" : [ {{ msg.dynamicValue | to_array | batch_render: 'PlanDefinition/DynamicValue', 'msg' }} ],
  "action" : [ {{ msg.action | to_array | batch_render: 'PlanDefinition/action', 'msg' }} ],
  "definition" : "",
  "triggerDefinition" : "",
  "label" : ""
}
{% endmergeDiff -%}