{% mergeDiff msg -%}
{
  "contained" : [ {{msg.contained | to_array | batch_render : 'Resource', 'msg'}} ],
  "partOf" : {{msg.parent | to_json_string | default : '""'}},
  "questionnaire" : {% include 'DataType/ReferenceToCanonical' msg: msg.questionnaire -%},
  "encounter" : {{msg.context | to_json_string | default : '""'}},
  "item" : [ {{ msg.item | to_array | batch_render: 'QuestionnaireResponse/Item', 'msg' }} ],
  "context" : "",
  "parent" : ""
}
{% endmergeDiff -%}