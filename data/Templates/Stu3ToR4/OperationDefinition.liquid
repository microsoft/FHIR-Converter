{% mergeDiff msg -%}
{
  "contained" : [ {{msg.contained | to_array | batch_render : 'Resource', 'msg'}} ],
  "affectsState" : "{{msg.idempotent}}",
  "idempotent" : "",
  "base" : {% include 'DataType/ReferenceToCanonical' msg: msg.base -%},
  "parameter" : [ {{ msg.parameter | to_array | batch_render: 'OperationDefinition/Parameter', 'msg' }} ]
}
{% endmergeDiff -%}